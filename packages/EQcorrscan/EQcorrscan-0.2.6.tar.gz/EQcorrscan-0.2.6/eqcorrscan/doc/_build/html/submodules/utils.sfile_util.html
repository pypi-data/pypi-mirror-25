

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.9. sfile_util &mdash; EQcorrscan 0.1.2rc documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/EQcorrscan_logo.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="EQcorrscan 0.1.2rc documentation" href="../index.html"/>
        <link rel="up" title="5. Utils" href="../utils.html"/>
        <link rel="next" title="5.9.1.1. eqcorrscan.utils.sfile_util.EVENTINFO" href="autogen/eqcorrscan.utils.sfile_util.EVENTINFO.html"/>
        <link rel="prev" title="5.8. seismo_logs" href="utils.seismo_logs.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> EQcorrscan
          

          
            
            <img src="../_static/EQcorrscan_logo.jpg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction to the EQcorrscan package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates.html">2. What&#8217;s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">3. EQcorrscan tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core.html">4. Core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../utils.html">5. Utils</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="utils.clustering.html">5.1. clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.plotting.html">5.2. plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.findpeaks.html">5.3. findpeaks</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.despike.html">5.4. despike</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.locate.html">5.5. locate</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.mag_calc.html">5.6. mag_calc</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.pre_processing.html">5.7. pre_processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.seismo_logs.html">5.8. seismo_logs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">5.9. sfile_util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#classes-functions">5.9.1. Classes &amp; Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.EVENTINFO.html">5.9.1.1. eqcorrscan.utils.sfile_util.EVENTINFO</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.PICK.html">5.9.1.2. eqcorrscan.utils.sfile_util.PICK</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.blanksfile.html">5.9.1.3. eqcorrscan.utils.sfile_util.blanksfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.eventtopick.html">5.9.1.4. eqcorrscan.utils.sfile_util.eventtopick</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.eventtosfile.html">5.9.1.5. eqcorrscan.utils.sfile_util.eventtosfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.nordpick.html">5.9.1.6. eqcorrscan.utils.sfile_util.nordpick</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.picktoevent.html">5.9.1.7. eqcorrscan.utils.sfile_util.picktoevent</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.populatesfile.html">5.9.1.8. eqcorrscan.utils.sfile_util.populatesfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readheader.html">5.9.1.9. eqcorrscan.utils.sfile_util.readheader</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readpicks.html">5.9.1.10. eqcorrscan.utils.sfile_util.readpicks</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readwavename.html">5.9.1.11. eqcorrscan.utils.sfile_util.readwavename</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.stationtoseisan.html">5.9.1.12. eqcorrscan.utils.sfile_util.stationtoseisan</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#private-functions">5.9.2. Private Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._evmagtonor.html">5.9.2.1. eqcorrscan.utils.sfile_util._evmagtonor</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._float_conv.html">5.9.2.2. eqcorrscan.utils.sfile_util._float_conv</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._int_conv.html">5.9.2.3. eqcorrscan.utils.sfile_util._int_conv</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._nortoevmag.html">5.9.2.4. eqcorrscan.utils.sfile_util._nortoevmag</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._str_conv.html">5.9.2.5. eqcorrscan.utils.sfile_util._str_conv</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="utils.stacking.html">5.10. stacking</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.synth_seis.html">5.11. synth_seis</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.catalog_to_dd.html">5.12. catalog_to_dd</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.sac_util.html">5.13. sac_util</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">EQcorrscan</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../utils.html">5. Utils</a> &raquo;</li>
      
    <li>5.9. sfile_util</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/submodules/utils.sfile_util.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-eqcorrscan.utils.sfile_util">
<span id="sfile-util"></span><h1>5.9. sfile_util<a class="headerlink" href="#module-eqcorrscan.utils.sfile_util" title="Permalink to this headline">¶</a></h1>
<p>Part of the EQcorrscan module to read nordic format s-files and write them
EQcorrscan is a python module designed to run match filter routines for
seismology, within it are routines for integration to seisan and obspy.
With obspy integration (which is necessary) all main waveform formats can be
read in and output.</p>
<p>Note that these functions do not provide full functionality between quakeML
and seisan s-files.  Currently (as of version 0.1.1) these only convert pick
times and phase information, along with amplitude information for local
magnitudes between seisan and quakeML.  Location information including
hypocentre, origin time and magnitudes are also handled.</p>
<p>A series of wrappers and conversions is included between the legacy PICK
and EVENTINFO classes, however these will be depreciated along with these
classes for version 0.1.0.  Users should transition to using obspy.core.event
classes as these have more support and functionality.</p>
<p>We have not implimented any handling of focal mechanism solutions between
the two formats.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Pick time-residauls are handled in event.origins[0].arrivals, with     the arrival.pick_id linking the arrival (which contain calculated     information) with the pick.resource_id (where the pick contains only     physical measured information).</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">eqcorrscan.utils</span> <span class="kn">import</span> <span class="n">sfile_util</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span> <span class="o">=</span> <span class="n">sfile_util</span><span class="o">.</span><span class="n">readpicks</span><span class="p">(</span><span class="s1">&#39;eqcorrscan/tests/test_data/REA/TEST_/&#39;</span> <span class="o">+</span>
<span class="gp">... </span>                             <span class="s1">&#39;01-0411-15L.S201309&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pick</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">picks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_rms</span> <span class="o">=</span> <span class="p">[</span><span class="n">arrival</span><span class="o">.</span><span class="n">time_residual</span> <span class="k">for</span> <span class="n">arrival</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">arrivals</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">arrival</span><span class="o">.</span><span class="n">pick_id</span> <span class="o">==</span> <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Calum Chamberlain, Chet Hopp.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</td>
</tr>
</tbody>
</table>
<div class="section" id="classes-functions">
<h2>5.9.1. Classes &amp; Functions<a class="headerlink" href="#classes-functions" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.EVENTINFO.html#eqcorrscan.utils.sfile_util.EVENTINFO" title="eqcorrscan.utils.sfile_util.EVENTINFO"><code class="xref py py-obj docutils literal"><span class="pre">EVENTINFO</span></code></a></td>
<td>Header information for seisan events, again all fields can be left blank     for a default empty header.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.PICK.html#eqcorrscan.utils.sfile_util.PICK" title="eqcorrscan.utils.sfile_util.PICK"><code class="xref py py-obj docutils literal"><span class="pre">PICK</span></code></a></td>
<td>Pick information for seisan implimentation, note all fields can be left    blank to obtain a default pick: picks have a print function which will    print them as they would be seen in an S-file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.blanksfile.html#eqcorrscan.utils.sfile_util.blanksfile" title="eqcorrscan.utils.sfile_util.blanksfile"><code class="xref py py-obj docutils literal"><span class="pre">blanksfile</span></code></a></td>
<td>Module to generate an empty s-file with a populated header for a given     waveform.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.eventtopick.html#eqcorrscan.utils.sfile_util.eventtopick" title="eqcorrscan.utils.sfile_util.eventtopick"><code class="xref py py-obj docutils literal"><span class="pre">eventtopick</span></code></a></td>
<td>Wrapper function to convert from obspy.core.event to legacy PICK and     EVENT classes.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.eventtosfile.html#eqcorrscan.utils.sfile_util.eventtosfile" title="eqcorrscan.utils.sfile_util.eventtosfile"><code class="xref py py-obj docutils literal"><span class="pre">eventtosfile</span></code></a></td>
<td>Function to take an obspy.event and write the relevant information to a     nordic formatted s-file</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.nordpick.html#eqcorrscan.utils.sfile_util.nordpick" title="eqcorrscan.utils.sfile_util.nordpick"><code class="xref py py-obj docutils literal"><span class="pre">nordpick</span></code></a></td>
<td>Function to print information from an obspy.event class to nordic format.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.picktoevent.html#eqcorrscan.utils.sfile_util.picktoevent" title="eqcorrscan.utils.sfile_util.picktoevent"><code class="xref py py-obj docutils literal"><span class="pre">picktoevent</span></code></a></td>
<td>Wrapper function to convert from EVENTINFO and PICK classes to     obspy.core.event.Event.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.populatesfile.html#eqcorrscan.utils.sfile_util.populatesfile" title="eqcorrscan.utils.sfile_util.populatesfile"><code class="xref py py-obj docutils literal"><span class="pre">populatesfile</span></code></a></td>
<td>Module to populate a blank nordic format S-file with pick information,     arguments required are the filename of the blank s-file and the picks     where picks is a dictionary of picks including station, channel,     impulsivity, phase, weight, polarity, time, coda, amplitude, peri,     azimuth, velocity, SNR, azimuth residual, Time-residual, final weight,     epicentral distance &amp; azimuth from event to station.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readheader.html#eqcorrscan.utils.sfile_util.readheader" title="eqcorrscan.utils.sfile_util.readheader"><code class="xref py py-obj docutils literal"><span class="pre">readheader</span></code></a></td>
<td>Function to read the header information from a seisan nordic format S-file.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readpicks.html#eqcorrscan.utils.sfile_util.readpicks" title="eqcorrscan.utils.sfile_util.readpicks"><code class="xref py py-obj docutils literal"><span class="pre">readpicks</span></code></a></td>
<td>Function to read pick information from the s-file and store this in an     obspy.event.Catalog type.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readwavename.html#eqcorrscan.utils.sfile_util.readwavename" title="eqcorrscan.utils.sfile_util.readwavename"><code class="xref py py-obj docutils literal"><span class="pre">readwavename</span></code></a></td>
<td>Convenience function to extract the waveform filename from the s-file,     returns a list of waveform names found in the s-file as multiples can     be present.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.stationtoseisan.html#eqcorrscan.utils.sfile_util.stationtoseisan" title="eqcorrscan.utils.sfile_util.stationtoseisan"><code class="xref py py-obj docutils literal"><span class="pre">stationtoseisan</span></code></a></td>
<td>Convert obspy station inventory to simple string to copy in to     STATION0.HYP file for seisan locations.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="private-functions">
<h2>5.9.2. Private Functions<a class="headerlink" href="#private-functions" title="Permalink to this headline">¶</a></h2>
<p>Note that these functions are not designed for public use and may change
at any point.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._evmagtonor.html#eqcorrscan.utils.sfile_util._evmagtonor" title="eqcorrscan.utils.sfile_util._evmagtonor"><code class="xref py py-obj docutils literal"><span class="pre">_evmagtonor</span></code></a></td>
<td>Convenience tool to switch from obspy event magnitude types to seisan     syntax</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._float_conv.html#eqcorrscan.utils.sfile_util._float_conv" title="eqcorrscan.utils.sfile_util._float_conv"><code class="xref py py-obj docutils literal"><span class="pre">_float_conv</span></code></a></td>
<td>Convenience tool to convert from string to float, if empty string return     NaN rather than an error</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._int_conv.html#eqcorrscan.utils.sfile_util._int_conv" title="eqcorrscan.utils.sfile_util._int_conv"><code class="xref py py-obj docutils literal"><span class="pre">_int_conv</span></code></a></td>
<td>Convenience tool to convert from string to integer, if empty string     return a 999 rather than an error.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._nortoevmag.html#eqcorrscan.utils.sfile_util._nortoevmag" title="eqcorrscan.utils.sfile_util._nortoevmag"><code class="xref py py-obj docutils literal"><span class="pre">_nortoevmag</span></code></a></td>
<td>Convenience tool to switch from nordic type magnitude notation to obspy     event magnitudes.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._str_conv.html#eqcorrscan.utils.sfile_util._str_conv" title="eqcorrscan.utils.sfile_util._str_conv"><code class="xref py py-obj docutils literal"><span class="pre">_str_conv</span></code></a></td>
<td>Convenience tool to convert a number, either float or into into a string,     if the int is 999, or the float is NaN, returns empty string.</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="autogen/eqcorrscan.utils.sfile_util.EVENTINFO.html" class="btn btn-neutral float-right" title="5.9.1.1. eqcorrscan.utils.sfile_util.EVENTINFO" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="utils.seismo_logs.html" class="btn btn-neutral" title="5.8. seismo_logs" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, 2016: Calum John Chamberlain &amp; Chet Hopp.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.2rc',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>