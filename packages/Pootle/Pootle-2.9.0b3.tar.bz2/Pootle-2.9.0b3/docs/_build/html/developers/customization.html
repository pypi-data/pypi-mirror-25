
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Customizing Pootle &#8212; Pootle 2.9.0b3 documentation</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.9.0b3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Supported Browsers" href="browsers.html" />
    <link rel="prev" title="Front-end Development" href="frontend.html" /> 
  </head>
  <body>
  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="../index.html">Pootle</a>
        <span class="navbar-text pull-left"><b>2.9</b></span>
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Features</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../server/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/upgrading.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">Administering a server</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>
</ul>
</li>
              
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Customizing Pootle</a><ul>
<li><a class="reference internal" href="#customizing-templates">Customizing templates</a></li>
<li><a class="reference internal" href="#customizing-javascript">Customizing JavaScript</a></li>
<li><a class="reference internal" href="#customizing-css">Customizing CSS</a></li>
<li><a class="reference internal" href="#customizing-images">Customizing images</a></li>
<li><a class="reference internal" href="#customising-robots-txt">Customising robots.txt</a></li>
<li><a class="reference internal" href="#installing-js-build-libraries">Installing JS build libraries</a></li>
<li><a class="reference internal" href="#rebuilding-assets-after-customization">Rebuilding assets after customization</a></li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
  <li><a href="frontend.html"
         title="previous chapter">&laquo; Front-end Development</a></li>
  <li><a href="browsers.html"
         title="next chapter">Supported Browsers &raquo;</a></li>
            
          </ul>
          <ul class="nav pull-right">
            
              
            
          
            
<form class="navbar-search pull-right" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
          </ul>
        </div>
      </div>
    </div>
  </div>

<div class="container content">
   
  <div class="section" id="customizing-pootle">
<span id="customization"></span><h1>Customizing Pootle<a class="headerlink" href="#customizing-pootle" title="Permalink to this headline">¶</a></h1>
<p>In some cases it might be desirable to customize the styling of Pootle to fit
in with your other websites or other aspects of your identity. It might also be
required to add a common header or footer for proper visual integration
and even adjust and enhance existing functionality.</p>
<p>It’s highly recommended to put any custom changes separate from the distributed
files, so that upgrades are unlikely to affect your customizations.</p>
<div class="section" id="customizing-templates">
<span id="customization-templates"></span><h2>Customizing templates<a class="headerlink" href="#customizing-templates" title="Permalink to this headline">¶</a></h2>
<p>In case you need to change a template, copy it into your custom
<a class="reference external" href="https://docs.djangoproject.com/en/1.10/ref/settings/#std:setting-TEMPLATES-DIRS" title="(in Django v1.10)"><code class="xref std std-setting docutils literal"><span class="pre">TEMPLATE:DIRS</span></code></a> directory with the same path name as
it had before.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you edit any templates, keep in mind that changes to the text could
result in untranslated text for users of the non-English user
interface.</p>
</div>
<p>You can customize specific blocks of templates by indicating which template the
current template is customizing. Use the <code class="docutils literal"><span class="pre">{%</span> <span class="pre">overextends</span> <span class="pre">%}</span></code> template tag for
that (requires to install the <a class="reference external" href="https://pypi.python.org/pypi/django-overextends">django-overextends package</a>). This must be the first
tag in the template.</p>
<div class="highlight-django"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">overextends</span> <span class="s1">&#39;browser/overview.html&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">pre_content</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nb">block</span><span class="nv">.super</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">&lt;h1&gt;My custom content&lt;/h1&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>Check the original templates in order to know which blocks can be
customized.</p>
<p>On upgrades, you will want to check if the templates and the contained
blocks differ.</p>
</div>
<div class="section" id="customizing-javascript">
<span id="customization-javascript"></span><h2>Customizing JavaScript<a class="headerlink" href="#customizing-javascript" title="Permalink to this headline">¶</a></h2>
<p>You can place any custom scripts in your custom <a class="reference external" href="https://docs.djangoproject.com/en/1.10/ref/settings/#std:setting-STATICFILES_DIRS" title="(in Django v1.10)"><code class="xref std std-setting docutils literal"><span class="pre">STATICFILES_DIRS</span></code></a>
directory and make them part of the default Pootle bundles by adding a very
simple <em>manifest.json</em> file under the <em>js/</em> directory of your custom
<a class="reference external" href="https://docs.djangoproject.com/en/1.10/ref/settings/#std:setting-STATICFILES_DIRS" title="(in Django v1.10)"><code class="xref std std-setting docutils literal"><span class="pre">STATICFILES_DIRS</span></code></a>.</p>
<p>This file must contain an object of key-values where the keys correspond
to the entry points defined by Pootle and the values are arrays of module
names to include in the output bundle. Check out the
<em>pootle/static/js/webpack.config.js</em> file to see the existing entry
points.</p>
<p>Example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;common&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;login.js&quot;</span><span class="p">,</span> <span class="s2">&quot;extra_module.js&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the example above, the <em>login.js</em> and the <em>extra_module.js</em> JavaScript
modules will be added as part of the <em>common</em> bundle. If <em>common</em> didn’t
exist as an entry point before, a new bundle will be output.</p>
<p>Note that the <em>manifest.json</em> file has to be valid JSON, otherwise it will
be omitted.</p>
<p>Custom scripts can <code class="docutils literal"><span class="pre">require()</span></code> Pootle modules that are part of the core
bundles by prefixing paths with <code class="docutils literal"><span class="pre">pootle/</span></code>. For instance the
<code class="docutils literal"><span class="pre">require('pootle/models')</span></code> call will make Pootle’s own <code class="docutils literal"><span class="pre">models</span></code> module
available in the scope of a 3rd party script.</p>
<p>Needless to say, you can refer to your custom scripts the same way as you
would refer to any other static asset, i.e. by using the <code class="docutils literal"><span class="pre">{%</span> <span class="pre">static</span> <span class="pre">%}</span></code>
template tag.</p>
</div>
<div class="section" id="customizing-css">
<span id="customization-css"></span><h2>Customizing CSS<a class="headerlink" href="#customizing-css" title="Permalink to this headline">¶</a></h2>
<p>Create any needed files under your custom <a class="reference external" href="https://docs.djangoproject.com/en/1.10/ref/settings/#std:setting-STATICFILES_DIRS" title="(in Django v1.10)"><code class="xref std std-setting docutils literal"><span class="pre">STATICFILES_DIRS</span></code></a> and
reference them from your custom templates using the <code class="docutils literal"><span class="pre">{%</span> <span class="pre">static</span> <span class="pre">%}</span></code> template
tag. You can also inline styles in your templates as usual.</p>
</div>
<div class="section" id="customizing-images">
<span id="customization-images"></span><h2>Customizing images<a class="headerlink" href="#customizing-images" title="Permalink to this headline">¶</a></h2>
<p>You should put your custom images in your custom <a class="reference external" href="https://docs.djangoproject.com/en/1.10/ref/settings/#std:setting-STATICFILES_DIRS" title="(in Django v1.10)"><code class="xref std std-setting docutils literal"><span class="pre">STATICFILES_DIRS</span></code></a>.
From CSS you would just reference them using a relative path.</p>
<p>On the contrary, if you want to reference images from HTML code or inline CSS,
you should use the <code class="docutils literal"><span class="pre">{%</span> <span class="pre">static</span> <span class="pre">%}</span></code> template tag.</p>
</div>
<div class="section" id="customising-robots-txt">
<span id="customization-robots"></span><h2>Customising robots.txt<a class="headerlink" href="#customising-robots-txt" title="Permalink to this headline">¶</a></h2>
<p>The site <cite>robots.txt</cite> file uses a static template.  There is no dynamic
content.  Place your custom <cite>robots.txt</cite> file in your custom templates folder
and this will be served instead of Pootle’s default <cite>robots.txt</cite> file.</p>
<p>Larger installs will want to serve this file statically, bypassing Django
completely.  You can safely serve the <cite>robots.txt</cite> template file as is,
statically, via your configured webserver.</p>
</div>
<div class="section" id="installing-js-build-libraries">
<span id="customization-install-node-libs"></span><h2>Installing JS build libraries<a class="headerlink" href="#installing-js-build-libraries" title="Permalink to this headline">¶</a></h2>
<p>Before you can rebuild your static assets with any CSS or JavaScript
customisations, you will need to install some Node.js libraries.</p>
<p>Before proceeding please make sure you have <a class="reference internal" href="../server/requirements.html#requirements-customize-static"><span class="std std-ref">Node.js and npm installed in
your system</span></a>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">(env) $</span> <span class="nb">cd</span> <span class="nv">$pootle_dir</span>
<span class="gp">(env) $</span> <span class="nb">cd</span> pootle/static/js/
<span class="gp">(env) $</span> npm install
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">$pootle_dir</span></code> is the directory where Pootle is installed.</p>
</div>
<div class="section" id="rebuilding-assets-after-customization">
<span id="customization-assets"></span><h2>Rebuilding assets after customization<a class="headerlink" href="#rebuilding-assets-after-customization" title="Permalink to this headline">¶</a></h2>
<p>Before rebuilding your assets for the first time you must <a class="reference internal" href="#customization-install-node-libs"><span class="std std-ref">install the
JavaScript build libraries</span></a>.</p>
<p>After doing any customizations, you will need to regenerate any modified
bundles and gather all the static assets in a single place for public
consumption.</p>
<p>You will need to activate your virtual environment before running these
commands.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">(env) $</span> pootle webpack
<span class="gp">(env) $</span> pootle collectstatic --noinput --clear -i node_modules
<span class="gp">(env) $</span> pootle assets build
</pre></div>
</div>
</div>
</div>


</div>
<hr>

<footer class="footer">
  <div class="container">
    <p class="pull-right"><a href="#">Back to top ↑</a></p>
    <ul class="unstyled muted">
      <li><small>
        &copy; 2004-2017.<br/>
      </small></li>
      <li><small>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.3.
      </small></li>
    </ul>
  </div>
</footer>
  </body>
</html>